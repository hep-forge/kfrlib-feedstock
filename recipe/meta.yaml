{% set versions = {
    "6.3.1": "da81e083328de740bcde022b8c0e81038c943be8df1744bee7034bceae27b23d",
    "6.0.0": "bd062116722a7ff6386b0a7e6b2712deaa5b2658c0ac60649241cb68b252b829",
    "5.2": "37aac995990d682cbeb8a252e3341dc10e4f94336c2bdac6c42aba13b7d40661",
    "4.2.1": "b576fffcfe147b9d2d2408738010c4bf3dbcd333870b048a9506c4bde61e2284"
} %}

{% set version = environ.get('COMMIT_VERSION', None) %}
{% set version = version or versions.keys()|first %}
{% set version = version|string %}

package:
  name: {{ environ.get('ANACONDA_PACKAGE', "kfrlib")|string|lower }}
  version: {{ environ.get('ANACONDA_VERSION', version)|replace("-", ".") }}

source:
  url: "https://git.ligo.org/kagra/software/kfr/-/archive/{{ version }}/kfr-{{ version }}.tar.gz"
  {% if versions.get(version, None) %}
  sha256: {{ versions.get(version) }}
  {% endif %}

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - clang
    - cmake
    - make
  host:
    - clang

about:
  home: "https://www.kfrlib.com"
  license: "GPLv2"
  summary: "Fast, modern C++ DSP framework, FFT, Sample Rate Conversion, FIR/IIR/Biquad Filters (SSE, AVX, AVX-512, ARM NEON)"
  description: |
    KFR is an open source C++ DSP framework that contains high performance building blocks for DSP, audio, scientific and other applications. It is distributed under dual GPLv2/v3 and commercial license.

extra:
  recipe-maintainers:
    - meiyasan
